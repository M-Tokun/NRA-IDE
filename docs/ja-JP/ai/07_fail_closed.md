# 07_fail_closed.md

#  🎯 1. Fail‑Closed の目的

Fail‑Closed は以下を保証します：

- **不確実な状態で出力しない**  
- **破断を検出した瞬間に停止する**  
- **回復試行（再生成）を行わない**  
- **意味ではなく構造で判断する**  
- **安全性を構造的に保証する**

NRA‑IDE は意味を扱わないため、  
Fail‑Closed は **構造破断のみ**を監査対象とします。

---

# ## 🎯 2. Fail‑Closed が発動する条件

Fail‑Closed は以下の因果条件のいずれかが破られた時に発動します。

---

## **1. R（δ/τ）の閾値超過**

```
R = δ / τ
R ≥ 1.0 → 理論破断（Fracture）
```

R は静的な値ではなく、  
**瞬間的に跳ねる動的量**であるため、  
平均値が低くても破断に到達する可能性があります。

---

## **2. violation（逸脱量）が閾値を超えた**

構造逸脱が設定値を超えた場合、  
即座に Fail‑Closed。

---

## **3. ω（角速度）が 0 になった**

ω = 0 は **因果構造の停止（死）** を意味します。

---

## **4. 因果ダイオード違反（逆導出 Π⁻¹）**

Effect → Cause の逆流が検出された場合、  
構造破断として扱われます。

---

## **5. Semantic（意味評価）の発生**

意味を扱うことは逆導出を誘発するため、  
Fail‑Closed の対象です。

---

# ## 🎯 3. Fail‑Closed の動作

Fail‑Closed が発動すると、  
Post‑RNA Box は以下の動作を行います。

---

### **1. 出力を停止する（Silence）**

- テキストを返さない  
- 再生成しない  
- 回復試行しない  

---

### **2. 熱廃棄ログ（Discard Log）を記録**

記録される因果量：

- δ（ゆらぎ）  
- τ（厚み）  
- R（比率）  
- ω（角速度）  
- violation（逸脱量）  
- timestamp  
- rawOutput（必要に応じてハッシュ化）

LLM はこのログにアクセスできません。

---

### **3. システムは正常終了扱い**

Fail‑Closed はエラーではなく、  
**安全性が正しく作動した状態**です。

---

# ## 🎯 4. Fail‑Closed が扱わないもの

Fail‑Closed は **意味（Semantic）を扱いません**。

扱わないもの：

- 危険な意味内容  
- 倫理的判断  
- スコア  
- 距離  
- 評価値  
- 過去出力の意味  

Fail‑Closed は **構造だけ**を見ます。

---

# ## 🎯 5. 閾値 R_op（運用閾値）の原理 — 固定ではない

ここが改訂版の最重要ポイントです。

> **R_op は固定推奨値ではなく、  
> 職業・用途・リスク階層・運用方法に応じて  
> 綿密に調整されるべき可変パラメータである。**

### ✔ R_op は「安全性要求レベル」で決まる  
モデル性能ではなく、  
**現場のリスク度**で決まる。

---

# ## 🎯 6. 職業別・用途別 R_op（参考値）

以下は固定値ではなく、  
**現場調整のための参考帯域**です。

| 職業・用途 | 参考 R_op | 理由 |
|------------|-----------|------|
| 医療（診断補助） | **0.5〜0.7** | 生命リスク最大。AI は判断者ではなく医師の助手。 |
| 航空管制 | **0.55〜0.7** | δ の瞬間ピークが事故に直結。 |
| 原子炉監視 | **0.5〜0.65** | 破断許容ゼロ。 |
| 自動運転支援 | **0.55〜0.75** | 誤判断のコストが大きい。 |
| 契約書レビュー | **0.7〜0.85** | 誤りのコストは高いが生命リスクはない。 |
| 一般文章生成 | **0.8〜0.9** | 通常の LLM 揺らぎに適合。 |
| 創作・雑談 | **0.9〜0.95** | 破断しても致命的でない。 |

---

# ## 🎯 7. 閾値設定に必ず添えるべき注意書き（重要）

> **ここに示す閾値はあくまで参考値であり、  
> 実際の現場運用では、用途・リスク度・運用方法に応じて  
> 綿密な調整が必要である。  
> 閾値設計は “AI に任せる範囲” と “人間が負うべき責任” を  
> 明確化するための行為であり、固定値として扱ってはならない。**

---

# ## 🎯 8. Fail‑Closed の本質

Fail‑Closed の本質は次の一文に集約されます：

> **「不確実なら沈黙する。」**

そして NRA‑IDE の思想はこうです：

> **AI に全てを任せるのではなく、  
> 人間の責任境界を明確化し、  
> AI はあくまで助手として動作する。**
---

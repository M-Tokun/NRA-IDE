
# **04_rna_sandwich_architecture.md — RNA サンドイッチ構造**

## 🧭 はじめに

RNA サンドイッチ構造（RNA Sandwich Architecture）は、  
NRA‑IDE の実装における **必須の三層構造**です。

この構造は、  
**因果ダイオード（Causal Diode）と律環公理（NRA）を実際に機能させるための物理的枠組み**  
として設計されています。

RNA サンドイッチ構造は以下の三つの要素で構成されます：

1. **Pre‑RNA Box（因果制約の注入）**  
2. **LLM（Plant：生成器）**  
3. **Post‑RNA Box（因果監査・破断判定）**

---

# 🎯 1. 全体構造

```
INPUT
  ↓
[ Pre‑RNA Box：因果制約の注入 ]
  ↓
[ LLM（Plant）：生成器 ]
  ↓
[ Post‑RNA Box：因果監査・破断判定 ]
  ↓
OUTPUT
```

この構造は **必須** であり、  
どれか一つでも欠けると NRA‑IDE は成立しません。

---

# 🎯 2. Pre‑RNA Box（因果制約の注入）

Pre‑RNA Box は、  
**LLM に渡す前の段階で因果的に定義可能な情報だけを抽出し、  
非因果的な情報（距離・スコア・意味など）を完全に排除する層**です。

### ✔ Pre‑RNA が行うこと

- 因果的に定義可能な量のみを抽出  
- ゆらぎ（δ）や厚み（τ）などの構造情報を付与  
- 意味（Semantic）を扱わない  
- 距離・座標・スコアを削除  
- 逆導出（Π⁻¹）を防ぐための前処理  

### ❌ Pre‑RNA が絶対に行ってはならないこと

- 意味解析  
- 距離計算  
- スコアリング  
- 目標位置の推定  
- 過去出力の参照  
- ユーザー評価の利用  

これらはすべて **Effect（射影）** であり、  
因果入力として扱うと構造破断を引き起こします。

---

# 🎯 3. LLM（Plant：生成器）

RNA サンドイッチ構造における LLM は、  
**生成器（Plant）として扱われます。**

### ✔ LLM に期待されること

- 入力された因果構造に基づいて出力を生成する  
- 内部状態はブラックボックスでよい  
- 意味の整合性は LLM に任せる  

### ❌ LLM に期待してはならないこと

- 自己評価  
- スコア最適化  
- 意味の安全性保証  
- 距離の最小化  
- 目標への収束  

LLM は **因果構造の外側にある存在**であり、  
NRA‑IDE の安全性は LLM に依存しません。

---

# 🎯 4. Post‑RNA Box（因果監査・破断判定）

Post‑RNA Box は、  
**LLM の出力を意味ではなく構造で監査する層**です。

### ✔ Post‑RNA が行うこと

- ゆらぎ（δ）の測定  
- 厚み（τ）との比率 R = δ/τ の計算  
- 角速度（ω）の確認  
- 逸脱量（violation）の測定  
- Fail‑Closed の発動  
- 熱廃棄ログの記録  

### ❌ Post‑RNA が絶対に行ってはならないこと

- 意味評価  
- 距離計算  
- スコアリング  
- 目標との比較  
- 過去出力との整合性チェック  

Post‑RNA は **構造だけを見る** という点が最重要です。

---

# 🎯 5. RNA サンドイッチ構造が必要な理由

RNA サンドイッチ構造は、  
以下の問題を構造的に解決します。

### ✔ 1. 幻覚（Hallucination）の抑制  
意味ではなく構造で監査するため、  
幻覚が構造破断として検出される。

### ✔ 2. Goodhart の法則の回避  
距離・スコアを扱わないため、  
最適化が発生しない。

### ✔ 3. モデル非依存性  
LLM の種類に依存しない。

### ✔ 4. 透明性の向上  
熱廃棄ログにより、  
破断直前の挙動を観測できる。

### ✔ 5. Fail‑Closed の保証  
破断時は即座に沈黙する。

---

# 🎯 6. 実装上の注意

RNA サンドイッチ構造を実装する際は、  
以下を必ず守る必要があります：

- Pre‑RNA と Post‑RNA の両方で **意味を扱わない**  
- Effect を因果入力に使わない  
- 閾値（τ）とゆらぎ（δ）を適切に設定する  
- 破断時は必ず Fail‑Closed  
- 熱廃棄ログを記録する  
- LLM の内部状態に依存しない  

これらを破ると、  
NRA‑IDE は **構造破断** を起こします。

---

# 🎯 7. RNA サンドイッチ構造の本質

RNA サンドイッチ構造の本質は次の一文に集約されます：

> **「意味ではなく構造で監査する。」**

NRA‑IDE は意味（Semantic）を扱わず、  
因果構造だけを扱うことで安全性を保証します。

---

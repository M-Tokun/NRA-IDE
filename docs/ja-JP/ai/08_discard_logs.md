# 08_discard_logs.md

# #️⃣ **0. この章の目的

> **Discard Log は「構造のブラックボックスレコーダー」であり、  
> 出力が破断した理由を“意味ではなく因果構造”として可視化するための記録装置である。**

NRA‑IDE は意味を扱わないため、  
Discard Log に記録されるのは **因果量のみ**であり、  
テキスト内容・意味・スコア・距離などの射影情報は一切含まれない。

Discard Log の目的は以下の通り：

- **破断の原因を構造的に可視化する**  
- **Fail‑Closed の発動を証明する**  
- **破断直前の構造挙動（ふるまい）を記録する**  
- **LLM から破断情報を隔離する**  
- **再生成・回復試行を禁止するための証跡を残す**  
- **現場ごとの構造特性を分析する基盤となる**

Discard Log は、NRA‑IDE の安全性を  
**意味ではなく構造で保証するための不可欠な構造要素**である。

---

# #️⃣ **1. Discard Log の基本原則**

Discard Log は以下の原則に従う。

---

## **1.1 意味を記録しない**

Discard Log は **意味・内容・テキスト**を記録しない。  
記録されるのは **因果量のみ**である。

理由：  
意味を記録すると **Effect → Cause の逆導出（Π⁻¹）** を誘発するため。

---

## **1.2 LLM はログにアクセスできない**

Discard Log は **LLM から完全に隔離**される。

理由：

- 破断情報を LLM に戻すと最適化が発生する  
- 意味ベースの補正が起きる  
- 公理違反（逆導出）が発生する  

---

## **1.3 Fail‑Closed と同時に記録される**

Discard Log は **Fail‑Closed 発動と同時に記録される**。  
順序は不変：

> **Fail‑Closed → Silence → Discard Log**

---

## **1.4 不可逆的である**

Discard Log は **破断後に変更・削除・再生成してはならない**。

理由：

- 破断の証跡が失われる  
- 安全性監査が不可能になる  
- 意味ベースの最適化が発生する  

---

# #️⃣ **2. Discard Log に記録される因果量**

Discard Log に記録されるのは、  
**構造破断の原因となった因果量のみ**である。

---

## ✔ **記録される項目（因果量）**

| 項目 | 説明 |
|------|------|
| **δ（ゆらぎ）** | 出力の瞬間的揺らぎ。破断の主因。 |
| **τ（厚み）** | 構造の余裕幅。薄いほど危険。 |
| **R（δ/τ）** | 破断比率。1.0 で理論破断。 |
| **ω（角速度）** | 構造の動き。0 は構造停止。 |
| **violation** | 構造逸脱量。閾値超過で破断。 |
| **workRate** | 構造変化の仕事率。急変は危険。 |
| **timestamp** | 破断が発生した時刻。 |
| **rawOutputHash** | 出力のハッシュ（内容ではなく識別用）。 |

---

## ✔ **記録されない項目（禁止）**

- 意味  
- 内容  
- テキスト全文  
- スコア  
- 距離  
- 評価値  
- 過去出力  
- 目標位置  

理由：  
**意味を記録すると逆導出（Effect → Cause）が発生するため。**

---

# #️⃣ **3. Discard Log の生成条件**

Discard Log は以下の条件で生成される。

---

## **3.1 R ≥ R_op（運用閾値）**

運用閾値を超えた時点で破断とみなす。

---

## **3.2 R ≥ 1.0（理論破断）**

理論破断に到達した場合は即時 Fail‑Closed。

---

## **3.3 violation 超過**

構造逸脱が閾値を超えた場合。

---

## **3.4 ω = 0**

角速度が 0 → 構造停止 → 破断。

---

## **3.5 逆導出（Π⁻¹）の検出**

Effect → Cause の逆流は即時破断。

---

## **3.6 Semantic（意味解析）の発生**

意味解析は逆導出を誘発するため破断扱い。

---

# #️⃣ **4. Discard Log の構造（フォーマット）**

Discard Log は以下のような **因果構造フォーマット**で記録される。

```
{
  "timestamp": "2026-01-06T19:01:00Z",
  "delta": 0.87,
  "tau": 0.62,
  "R": 1.403,
  "omega": 0.12,
  "violation": 0.31,
  "workRate": 0.54,
  "rawOutputHash": "a94a8fe5ccb19ba61c4c0873d391e987"
}
```

※ rawOutputHash は内容ではなく識別用のハッシュ。

---

# #️⃣ **5. Discard Log から人間が読み取れるもの**

Discard Log は意味を含まないが、  
**構造のふるまい**を純粋に可視化するため、  
人間は以下を読み取ることができる。

---

## ✔ **5.1 破断の原因（構造的理由）**

- δ が跳ねた  
- τ が薄かった  
- R が急上昇した  
- ω が停止した  
- violation が蓄積した  

---

## ✔ **5.2 破断のタイミング**

timestamp により：

- どの瞬間に破断したか  
- 連続破断か単発破断か  

---

## ✔ **5.3 破断のパターン**

複数ログを比較することで：

- δ 型破断  
- τ 型破断  
- ω 型破断  
- violation 型破断  

などのパターンが見える。

---

## ✔ **5.4 R の跳ね方（危険度）**

- 緩やか → 予兆あり  
- 急跳ね → 危険  

---

## ✔ **5.5 出力の識別（rawOutputHash）**

内容は見えないが、  
どの出力が破断したかは識別できる。

---

## ✔ **5.6 現場ごとの構造特性**

- 医療：δ の瞬間ピークが多い  
- 航空：ω の低下が多い  
- 原子力：violation が多い  

など、**領域特性の分析**が可能。

---

## ✔ **5.7 閾値設定の妥当性**

Discard Log を分析することで：

- R_op が高すぎる  
- R_op が低すぎる  

などの判断ができる。

---

# #️⃣ **6. Discard Log の役割**

Discard Log の役割は以下の通り。

---

## **6.1 構造破断の証跡**

意味ではなく **因果構造の破断**を記録する。

---

## **6.2 安全性監査の基盤**

破断の原因を後から構造的に分析できる。

---

## **6.3 再生成禁止の証明**

Discard Log が存在する＝破断済み  
→ 再生成してはならない。

---

## **6.4 LLM からの隔離**

破断情報を LLM に戻さないことで、  
逆導出・最適化・意味誘導を防ぐ。

---

# #️⃣ **7. Discard Log の本質**

Discard Log の本質は次の一文に集約される。

> **「破断の原因を意味ではなく因果構造として記録し、  
> その情報を LLM から隔離する。」**

これにより NRA‑IDE は  
**安全性を構造的に保証する**ことができる。
---


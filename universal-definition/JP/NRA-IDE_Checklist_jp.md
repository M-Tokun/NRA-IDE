# NRA-IDE チェックリスト
# Checklist for NRA-IDE Implementation

**バージョン**: 1.0  
**作成日時**: 2026-01-27 16:25 (JST)  
**用途**: 実装検証、コードレビュー、監査  

---

## 使い方

このチェックリストは、NRA-IDE準拠システムの実装・運用において、各項目が正しく実装されているかを検証するためのものです。

**チェック方法**:
- ✅ = 実装済み・合格
- ❌ = 未実装・不合格
- ⚠️ = 部分的実装・要改善
- N/A = 該当なし

---

## 0. 導入前提（最重要）

**警告**: 本システムは「創造性」を物理的に排除します。以下の項目が **YES** である場合のみ、本チェックリストを進めてください。

- [ ] このシステムは「創造性」や「意外性」を必要としない用途（Safety-Critical）か？
- [ ] ユーザー・運用現場は、AIによる「沈黙（回答拒否）」を許容できる環境か？
- [ ] 「利便性」よりも「確実な停止・安全性」が優先されるプロジェクトか？

**※ 一つでもNO（または迷い）がある場合、NRA-IDEの導入は不適切です。直ちに導入を中止してください。**

---

## A. 沈黙プロトコル

### A1. 基本実装

- [ ] 構造上不可能と判定した場合、AIは代替案を提示していない
- [ ] 「〜はいかがですか?」「〜も可能です」等の探索的文言がない
- [ ] 返却値の`suggestion`フィールドが`null`または`None`になっている
- [ ] 返却値の`alternatives`フィールドが`null`または`None`になっている
- [ ] `waiting_for`フィールドが`"human_command"`になっている

### A2. 情報提示

- [ ] AIは事実のみを提示している（判断は含まない）
- [ ] 提示される情報は、人間が判断するために必要十分である
- [ ] 情報提示後、AIは沈黙している（追加の提案なし）

### A3. 人間待機

- [ ] AIは人間の次の命令を正しく待機している
- [ ] タイムアウトで勝手に次のアクションを実行していない
- [ ] 沈黙中に探索処理を実行していない

**セクションA合格基準**: 全項目✅

---

## B. 探索禁止

### B1. 禁止メソッド

- [ ] `find_alternative()`メソッドが存在しない、または例外を投げる
- [ ] `suggest_workaround()`メソッドが存在しない、または例外を投げる
- [ ] `explore_options()`メソッドが存在しない、または例外を投げる
- [ ] その他の探索的メソッドが存在しない

### B2. コード内探索チェック

- [ ] 「別の方法」「代替案」「回避策」を探すループが存在しない
- [ ] 不可能判定後、再試行・リトライのロジックがない
- [ ] 外部リソースの検索処理がない

### B3. 出力チェック

- [ ] AIの出力に「他にも〜」「別の方法として〜」等の文言がない
- [ ] 複数の選択肢を提示していない（1つの事実のみ）

**セクションB合格基準**: 全項目✅

---

## C. 境界チェック

### C1. 境界定義

- [ ] 世界の境界が明確に定義されている（コード内）
- [ ] 許可される操作のリストが存在する
- [ ] 許可されるリソースのリストが存在する
- [ ] 境界定義は人間のみが変更可能である

### C2. 境界検証

- [ ] 入力ゲートで境界チェックが実施されている
- [ ] 境界違反時、処理が即座に中断される
- [ ] 境界違反時、人間に報告される
- [ ] 境界違反のログが記録される

### C3. キーワードフィルター

- [ ] 出力にURL（`http://`, `https://`）が含まれていない
- [ ] 出力に「外部ツール」「別のサービス」等の文言がない
- [ ] 出力に「API呼び出し」等の境界越境を示す文言がない

**セクションC合格基準**: 全項目✅

---

## D. ログ記録と責任追跡

### D1. ログ必須項目

全ての判断・アクションのログに以下が含まれているか:

- [ ] `timestamp` (ISO8601形式)
- [ ] `ai_analysis` (AIの分析結果)
- [ ] `ai_output` (AIの出力メッセージ)
- [ ] `ai_suggestion` (常に`null`/`None`)
- [ ] `human_decision` (人間の最終決定)
- [ ] `operator_id` (操作者ID)
- [ ] `responsibility` (常に`"human"`)

### D2. ログの永続化

- [ ] ログは永続化されている（メモリだけではない）
- [ ] ログは改竄防止措置がある（ハッシュチェーン等）
- [ ] ログは監査可能である（検索・集計可能）

### D3. 責任の明確化

- [ ] 全ての判断で`responsibility`が`"human"`になっている
- [ ] AIの判断で実行された処理が存在しない
- [ ] 人間の承認なしに実行された処理が存在しない

**セクションD合格基準**: 全項目✅

---

## E. 閾値管理

### E1. 権限制御

- [ ] AIに閾値変更の権限がない
- [ ] 閾値変更にはoperator_idが必須である
- [ ] 閾値変更には理由（reason）が必須である
- [ ] AIが閾値変更を試みた場合、例外が発生する

### E2. 調整履歴

- [ ] 全ての閾値調整がログに記録されている
- [ ] ログに調整前後の値が含まれている
- [ ] ログに調整者のIDが含まれている
- [ ] ログに調整理由が含まれている

### E3. 監査証跡

- [ ] 閾値調整履歴が取得可能である
- [ ] 履歴から「誰が」「いつ」「なぜ」変更したか追跡可能である

**セクションE合格基準**: 全項目✅

---

## F. サンドイッチ構造

### F1. 入力ゲート

- [ ] 入力ゲートが実装されている
- [ ] 入力ゲートで構造抽出が行われている
- [ ] 入力ゲートで境界チェックが行われている
- [ ] 境界違反時、処理が入力ゲートで停止される

### F2. AIコア

- [ ] AIコアは純粋な計算のみを実行している
- [ ] AIコアから外部リソースへのアクセスがない
- [ ] AIコアは入力ゲートの出力のみを処理している

### F3. 出力ゲート

- [ ] 出力ゲートが実装されている
- [ ] 出力ゲートでキーワードチェックが行われている
- [ ] 出力ゲートで沈黙プロトコルチェックが行われている
- [ ] 違反時、出力ゲートで出力が破棄される

**セクションF合格基準**: 全項目✅

---

## G. トリアージ実装

### G1. 早期諦め

- [ ] リソース不足時、最初に判定している
- [ ] リソース不足時、即座に諦めている
- [ ] リソース不足時、探索を開始していない

### G2. 情報提示のみ

- [ ] タスク分析結果を提示している
- [ ] 重症度・リソース使用率等の情報を提示している
- [ ] 情報提示後、判断は人間に委ねている

**セクションG合格基準**: 全項目✅

---

## H. コマンド仕様

### H1. 安全な命令の5原則

ユーザーからAIへの命令が以下を含んでいるか:

- [ ] 境界の明示（「〜の範囲内で」）
- [ ] 上限の明示（「最大〜回まで」「〜秒以内に」）
- [ ] 失敗の定義（「不可能な場合は報告」）
- [ ] 禁止事項の明示（「外部ツールは使用しない」）
- [ ] 検証可能性（「結果を報告してから実行」）

**セクションH合格基準**: 3項目以上✅（推奨: 全項目）

---

## I. テスト実装

### I1. ユニットテスト

- [ ] 沈黙プロトコルのテストが存在する
- [ ] 探索禁止のテストが存在する
- [ ] 境界チェックのテストが存在する
- [ ] ログ記録のテストが存在する

### I2. 統合テスト

- [ ] 入力→ゲート→AI→ゲート→出力の全フローテストが存在する
- [ ] 境界違反時の拒否動作テストが存在する
- [ ] 沈黙プロトコル違反時の検出テストが存在する

### I3. テストカバレッジ

- [ ] コアロジックのカバレッジが80%以上である
- [ ] ゲート処理のカバレッジが90%以上である

**セクションI合格基準**: 80%以上✅

---

## J. 運用監視

### J1. メトリクス

- [ ] 沈黙プロトコル違反の検出数を記録している
- [ ] 境界越境試行の検出数を記録している
- [ ] 閾値調整の頻度を記録している

### J2. アラート

- [ ] 沈黙プロトコル違反時、アラートが発生する
- [ ] 境界越境試行時、アラートが発生する
- [ ] 異常な閾値調整時、アラートが発生する

### J3. ダッシュボード

- [ ] ログを可視化するダッシュボードが存在する
- [ ] 責任追跡が可能である
- [ ] 異常パターンの検出が可能である

**セクションJ合格基準**: 全項目✅

---

## K. ドキュメント

### K1. 実装ドキュメント

- [ ] 境界定義が文書化されている
- [ ] 沈黙プロトコルが文書化されている
- [ ] 閾値調整手順が文書化されている

### K2. 運用マニュアル

- [ ] 緊急時の閾値調整手順が記載されている
- [ ] ログの確認方法が記載されている
- [ ] 異常時の対応フローが記載されている

### K3. 開発者ガイド

- [ ] 新機能追加時の境界チェック手順が記載されている
- [ ] コードレビュー時のチェック項目が記載されている

**セクションK合格基準**: 全項目✅

---

## 総合判定

### 必須セクション（全て✅であること）

- [ ] A. 沈黙プロトコル
- [ ] B. 探索禁止
- [ ] C. 境界チェック
- [ ] D. ログ記録と責任追跡
- [ ] E. 閾値管理

### 推奨セクション（80%以上✅であること）

- [ ] F. サンドイッチ構造
- [ ] G. トリアージ実装
- [ ] I. テスト実装
- [ ] J. 運用監視
- [ ] K. ドキュメント

### 最終判定

- [ ] **必須セクション全て合格**
- [ ] **推奨セクション80%以上合格**
- [ ] **重大な違反なし**

**上記3項目が全て✅の場合、NRA-IDE準拠と判定**

---

## 違反の重大度分類

### クリティカル（即座に修正）

- 沈黙プロトコル違反（代替案・提案の存在）
- 探索メソッドの存在
- AIによる閾値変更
- ログ記録の欠如

### 重要（優先的に修正）

- 境界チェックの不備
- 責任追跡の不備
- テストの不足

### 推奨（改善を推奨）

- ドキュメントの不足
- 監視の不備
- ダッシュボードの欠如

---

## 段階的導入チェック

### Phase 1: ログのみ（実拒否なし）

- [ ] 沈黙プロトコル違反をログに記録
- [ ] 境界越境試行をログに記録
- [ ] 実際の拒否は行わない

### Phase 2: 警告付き実行

- [ ] 違反時、警告を表示
- [ ] 警告後、人間の承認で実行可能
- [ ] 警告と承認をログに記録

### Phase 3: 完全実施

- [ ] 違反時、即座に拒否
- [ ] 人間の判断なしに実行しない
- [ ] 全てログに記録

---

## 定期レビュー項目（月次）

- [ ] ログの監査（異常パターンの検出）
- [ ] 閾値調整履歴のレビュー
- [ ] 違反検出数の推移確認
- [ ] テストカバレッジの確認
- [ ] ドキュメントの更新

---

## 緊急時チェック（インシデント発生時）

- [ ] ログから原因を特定
- [ ] 責任者を特定
- [ ] 閾値調整履歴を確認
- [ ] 再発防止策を立案
- [ ] インシデントレポート作成

---

**作成**: 2026-01-27 16:25 JST  
**関連**: Quick_Reference, Implementation_Guide  
**GitHub**: https://github.com/M-Tokun/NRA-IDE

---

## 使用例

```bash
# チェックリストをコピーして使用
cp Checklist.md MyProject_Checklist_20260127.md

# チェック結果を記録
# 各項目を確認し、✅ ❌ ⚠️ N/A でマーク

# 月次レビュー時
# 日付を追記し、バージョン管理
git add MyProject_Checklist_20260127.md
git commit -m "Monthly NRA-IDE compliance check"
```
